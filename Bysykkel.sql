DROP SCHEMA IF EXISTS Bysykkel;
CREATE SCHEMA Bysykkel;
USE Bysykkel;

CREATE TABLE Sykkelstativ(
StativID CHAR(4),
Sted CHAR(20),
CONSTRAINT SykkelstativPK PRIMARY KEY(stativID)
);

CREATE TABLE Lås(
StativID CHAR(4),
Låsnr CHAR(2),
CONSTRAINT LåsPK PRIMARY KEY (StativID, Låsnr),
CONSTRAINT LåsFK FOREIGN KEY (StativID) REFERENCES Sykkelstativ(StativID)
);

CREATE TABLE Sykkel(
SykkelID CHAR(4),
Startdato DATE,
StativID CHAR(4),
Låsnr CHAR(4),
CONSTRAINT SykkelPK PRIMARY KEY (SykkelID),
CONSTRAINT SykkelStativFK FOREIGN KEY (StativID, Låsnr) REFERENCES Lås(StativID, Låsnr)
);

CREATE TABLE Kunde(
Mobilnr CHAR(11),
Fornavn CHAR(15),
Etternavn CHAR(20),
Betalingskort CHAR(16),
CONSTRAINT KundePK PRIMARY KEY (Mobilnr)
);

CREATE TABLE Utleie(
SykkelID CHAR(4),
Utlevert TIMESTAMP,
Mobilnr CHAR(11),
Innlevert TIMESTAMP,
Beløp DECIMAL(8,2),
CONSTRAINT UtleiePK PRIMARY KEY (SykkelID, Utlevert),
CONSTRAINT UtleieFK FOREIGN KEY (SykkelID) REFERENCES Sykkel(SykkelID),
CONSTRAINT UtleieKundePK FOREIGN KEY (Mobilnr) REFERENCES Kunde(Mobilnr)
);



/*
INSERT INTO Sykkelstativ VALUES(1000,'Majostuen');
INSERT INTO Sykkelstativ VALUES(3000,'Tøyen');
INSERT INTO Sykkelstativ VALUES(4567,'Grønnland');
INSERT INTO Sykkelstativ VALUES(5732,'Bislett');
INSERT INTO Sykkelstativ VALUES(1234,'Frogner');
INSERT INTO Sykkelstativ VALUES(5432,'Akerbrygge');
INSERT INTO Sykkelstativ VALUES(3455,'Stovner');
INSERT INTO Sykkelstativ VALUES(1341,'Holmenkollen');
INSERT INTO Sykkelstativ VALUES(2348,'Ullern');
INSERT INTO Sykkelstativ VALUES(1356,'Majostuen');

INSERT INTO Lås VALUES(1000,19);
INSERT INTO Lås VALUES(3000,54);
INSERT INTO Lås VALUES(4567,10);
INSERT INTO Lås VALUES(5732,30);
INSERT INTO Lås VALUES(1234,39);
INSERT INTO Lås VALUES(5432,53);
INSERT INTO Lås VALUES(3455,15);
INSERT INTO Lås VALUES(1341,51);
INSERT INTO Lås VALUES(2348,13);
INSERT INTO Lås VALUES(1356,35);
INSERT INTO Lås VALUES(1000,20);
INSERT INTO Lås VALUES(1000,40);

INSERT INTO Sykkel VALUES(1000,'2018.03.13',1000,19);
INSERT INTO Sykkel VALUES(2000,'2018-02.10',3000,54);
INSERT INTO Sykkel VALUES(3000,'2018-04.01',4567,10);
INSERT INTO Sykkel VALUES(4000,'2017-04.10',5732,30);
INSERT INTO Sykkel VALUES(5000,'2017-12.20',1234,39);
INSERT INTO Sykkel VALUES(1500,'2017-08.11',5432,53);
INSERT INTO Sykkel VALUES(2500,'2018-04.10',3455,15);
INSERT INTO Sykkel VALUES(3500,'2016-06.15',1341,51);
INSERT INTO Sykkel VALUES(4500,'2018-09.24',2348,13);
INSERT INTO Sykkel VALUES(5500,'2018-04.10',1356,35);

INSERT INTO Kunde VALUES('+4778945612','Pernille', 'Hofgaard','7894123045698745');
INSERT INTO Kunde VALUES('+4746887678','Anette', 'Lindgaard','7852014569853689');
INSERT INTO Kunde VALUES('+4702469874','Mette', 'Malta','2365410879453221');
INSERT INTO Kunde VALUES('+4712345678','Annegrete', 'Olsen','4567890125489600');
INSERT INTO Kunde VALUES('+4710247856','Oda', 'Pettersen','4521369871025933');
INSERT INTO Kunde VALUES('+4778952147','Bente', 'Nilsen','3215964875201311');
INSERT INTO Kunde VALUES('+4758746982','Ola', 'Nordmann','4785210365456997');
INSERT INTO Kunde VALUES('+4787469636','Emil', 'Kalstø','9876302541785269');
INSERT INTO Kunde VALUES('+4754712365','Karl', 'Moseng','8745102136549841');
INSERT INTO Kunde VALUES('+4778454789','Petter', 'Larsen','1452365478954301');
INSERT INTO Kunde VALUES('+4746887871','Hans', 'Magnussen','1452365478954033');
INSERT INTO Kunde VALUES('+4720084789','Mads', 'Karlsen','1452365478954366');


INSERT INTO Utleie VALUES(1000,'2016-03-20 12:10:30','+4778945612','2016-03-20 13:10:10',30);
INSERT INTO Utleie VALUES(2000,'2016-03-20 12:30:00','+4746887678','2016-03-20 13:30.20',80);
INSERT INTO Utleie VALUES(3000,'2016-04-21 12:45:17','+4702469874','2016-04-21 15:20:52',35);
INSERT INTO Utleie VALUES(4000,'2018-02-02 15:00:32','+4712345678','2018-02-02 16:10:54',50);
INSERT INTO Utleie VALUES(5000,'2017-03-13 13:00:02','+4710247856','2017-03-13 13:45:43',70);
INSERT INTO Utleie VALUES(1500,'2016-06-15 08:00:24','+4778952147','2016-06-15 08:50:21',80);
INSERT INTO Utleie VALUES(2500,'2017-05-25 08:15:13','+4758746982','2017-05-25 12:15:44',90);
INSERT INTO Utleie VALUES(3500,'2018-02-27 07:30:48','+4787469636','2018-02-27 08:07:57',50);
INSERT INTO Utleie VALUES(4500,'2018-03-31 09:40:35','+4754712365','2018-03-31 10:00:13',90);
INSERT INTO Utleie VALUES(5500,'2018-02-20 14:00:07','+4778454789','2018-02-20 14:15:34',90);
INSERT INTO Utleie VALUES(1500,'2015-01-13 12:30:00','+4720084789','2015-01-13 12:35:00',200);
*/